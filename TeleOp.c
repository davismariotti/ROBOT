#pragma config(Hubs,  S1, HTMotor,  HTMotor,  none,     none)
#pragma config(Sensor, S1,     ,               sensorI2CMuxController)
#pragma config(Motor,  mtr_S1_C1_1,     motorD,        tmotorTetrix, openLoop)
#pragma config(Motor,  mtr_S1_C1_2,     motorE,        tmotorTetrix, openLoop)
#pragma config(Motor,  mtr_S1_C2_1,     motorF,        tmotorTetrix, openLoop)
#pragma config(Motor,  mtr_S1_C2_2,     motorG,        tmotorTetrix, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#include "JoystickDriver.c"

//Get the left side movement.
int getJoy1y1()
{
	return joystick.joy1_y1;
}
//Get the right side movement.
int getJoy1y2()
{
	return joystick.joy1_y2;
}
int getArmMovement()
{
	return joystick.joy2_y1;
}

//Returns
int getMotorSlow()
{
  if (joy1Btn(1) == 1) //X position
	  return 1; //fast
	else if (joy1Btn(2) == 1) //A position
    return 2; //medium
	else if (joy1Btn(3) == 1) //B position
		return 4; //slow
	else {
		return 0;
	}
}

int motorSlow = 1;
int motorSpeedD = 0;
int motorSpeedE = 0;
int motorSpeedF = 0;

//Initialize, setting all motors to a speed of 0.
void initializeRobot()
{
	motor[motorD] = 0;
	motor[motorE] = 0;
	motor[motorF] = 0;
}

void joy1Controls()
{
	getJoystickSettings(joystick);
	motorSpeedD = getjoy1y1();
	motorSpeedE = getJoy1y2();
  motor[motorD] = motorSpeedD / motorSlow;
  motor[motorE] = motorSpeedE / motorSlow;
	if(getMotorSlow() != 0)	{
		motorSlow = getMotorSlow();
	}
}

void joy2Controls()
{
	motorSpeedF = getArmMovement();
	//This motor controls the arm, moving it up and down.
	//May need editing later, probably just changing it to negative.
}

task main()

{
    initializeRobot();

    //waitForStart();

    while(true)
    {
	    joy1Controls();
	    //joy2Controls();
    }
}
